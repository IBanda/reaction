'use strict';

var Element = require('./element'),
    ReactClass = require('./reactClass'),
    nameUtilities = require('./utilities/name'),
    arrayUtilities = require('./utilities/array'),
    ReactComponent = require('./reactComponent'),
    ReactClassElement = require('./element/react/class'),
    ReactFunctionElement = require('./element/react/function'),
    ReactComponentElement = require('./element/react/component'),
    VirtualDOMTextElement = require('./element/virtualDOMNode/textElement'),
    VirtualDOMHTMLElement = require('./element/virtualDOMNode/element/html'),
    VirtualDOMSVGElement = require('./element/virtualDOMNode/element/svg');

var flatten = arrayUtilities.flatten,
    isSVGTagName = nameUtilities.isSVGTagName;


function createClass(object) {
  return ReactClass.create(object);
}

function createElement(firstArgument, properties) {
  var element = null;

  if (firstArgument !== undefined) {
    for (var _len = arguments.length, childArguments = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      childArguments[_key - 2] = arguments[_key];
    }

    var children = childrenFromChildArguments(childArguments),
        props = Object.assign({}, properties, {
      children: children
    });

    if (false) {
      ///
    } else if (typeof firstArgument === 'string') {
      var tagName = firstArgument,
          ///
      virtualDOMElement = isSVGTagName(tagName) ? new VirtualDOMSVGElement(tagName, props) : new VirtualDOMHTMLElement(tagName, props);

      element = virtualDOMElement; ///
    } else if (firstArgument instanceof ReactClass) {
      var reactClass = firstArgument,
          ///
      reactClassElement = new ReactClassElement(reactClass, props);

      element = reactClassElement; ///

      var mixins = reactClass.mixins;


      assignMixins(mixins, element);
    } else if (isSubclassOf(firstArgument, ReactComponent)) {
      var _ReactComponent = firstArgument,
          ///
      reactComponent = new _ReactComponent(),
          reactComponentElement = new ReactComponentElement(reactComponent, props);

      element = reactComponentElement; ///

      assignReactComponentMixins(_ReactComponent, element);
    } else if (typeof firstArgument === 'function') {
      var reactFunction = firstArgument,
          ///
      reactFunctionElement = new ReactFunctionElement(reactFunction, props);

      element = reactFunctionElement; ///
    }
  }

  return element;
}

var Component = ReactComponent,
    ///
React = {
  Component: Component,
  createClass: createClass,
  createElement: createElement
};

module.exports = React;

function childrenFromChildArguments(childArguments) {
  childArguments = flatten(childArguments); ///

  var children = childArguments.map(function (childArgument) {
    var child = void 0;

    if (isSubclassOf(childArgument.constructor, Element)) {
      ///
      child = childArgument; ///
    } else {
      var text = childArgument,
          ///
      virtualDOMTextElement = new VirtualDOMTextElement(text);

      child = virtualDOMTextElement;
    }

    return child;
  });

  return children;
}

function assignReactComponentMixins(reactComponent, element) {
  var _reactComponent = reactComponent,
      mixins = _reactComponent.mixins;


  reactComponent = Object.getPrototypeOf(reactComponent); ///

  if (reactComponent !== ReactComponent) {
    assignReactComponentMixins(reactComponent, element);
  }

  assignMixins(mixins, element);
}

function assignMixins(mixins, element) {
  if (mixins) {
    mixins.forEach(function (mixin) {
      var name = mixin.name;


      element[name] = mixin.bind(element);
    });
  }
}

function isSubclassOf(argument, Class) {
  var subclass = false;

  if (argument.name === Class.name) {
    ///
    subclass = true;
  } else {
    argument = Object.getPrototypeOf(argument); ///

    if (argument !== null) {
      subclass = isSubclassOf(argument, Class);
    }
  }

  return subclass;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9yZWFjdC5qcyJdLCJuYW1lcyI6WyJFbGVtZW50IiwicmVxdWlyZSIsIlJlYWN0Q2xhc3MiLCJuYW1lVXRpbGl0aWVzIiwiYXJyYXlVdGlsaXRpZXMiLCJSZWFjdENvbXBvbmVudCIsIlJlYWN0Q2xhc3NFbGVtZW50IiwiUmVhY3RGdW5jdGlvbkVsZW1lbnQiLCJSZWFjdENvbXBvbmVudEVsZW1lbnQiLCJWaXJ0dWFsRE9NVGV4dEVsZW1lbnQiLCJWaXJ0dWFsRE9NSFRNTEVsZW1lbnQiLCJWaXJ0dWFsRE9NU1ZHRWxlbWVudCIsImZsYXR0ZW4iLCJpc1NWR1RhZ05hbWUiLCJjcmVhdGVDbGFzcyIsIm9iamVjdCIsImNyZWF0ZSIsImNyZWF0ZUVsZW1lbnQiLCJmaXJzdEFyZ3VtZW50IiwicHJvcGVydGllcyIsImVsZW1lbnQiLCJ1bmRlZmluZWQiLCJjaGlsZEFyZ3VtZW50cyIsImNoaWxkcmVuIiwiY2hpbGRyZW5Gcm9tQ2hpbGRBcmd1bWVudHMiLCJwcm9wcyIsIk9iamVjdCIsImFzc2lnbiIsInRhZ05hbWUiLCJ2aXJ0dWFsRE9NRWxlbWVudCIsInJlYWN0Q2xhc3MiLCJyZWFjdENsYXNzRWxlbWVudCIsIm1peGlucyIsImFzc2lnbk1peGlucyIsImlzU3ViY2xhc3NPZiIsInJlYWN0Q29tcG9uZW50IiwicmVhY3RDb21wb25lbnRFbGVtZW50IiwiYXNzaWduUmVhY3RDb21wb25lbnRNaXhpbnMiLCJyZWFjdEZ1bmN0aW9uIiwicmVhY3RGdW5jdGlvbkVsZW1lbnQiLCJDb21wb25lbnQiLCJSZWFjdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtYXAiLCJjaGlsZEFyZ3VtZW50IiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsInRleHQiLCJ2aXJ0dWFsRE9NVGV4dEVsZW1lbnQiLCJnZXRQcm90b3R5cGVPZiIsImZvckVhY2giLCJtaXhpbiIsIm5hbWUiLCJiaW5kIiwiYXJndW1lbnQiLCJDbGFzcyIsInN1YmNsYXNzIl0sIm1hcHBpbmdzIjoiQUFB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QSxXQUFPbUIsT0FBUCxDQUFlLFVBQVNDLEtBQVQsRUFBZ0I7QUFBQSxVQUNyQkMsSUFEcUIsR0FDWkQsS0FEWSxDQUNyQkMsSUFEcUI7OztBQUc3QmpDLGNBQVFpQyxJQUFSLElBQWdCRCxNQUFNRSxJQUFOLENBQVdsQyxPQUFYLENBQWhCO0FBQ0QsS0FKRDtBQUtEO0FBQ0Y7O0FBRUQsU0FBU2MsWUFBVCxDQUFzQnFCLFFBQXRCLEVBQWdDQyxLQUFoQyxFQUF1QztBQUNyQyxNQUFJQyxXQUFXLEtBQWY7O0FBRUEsTUFBSUYsU0FBU0YsSUFBVCxLQUFrQkcsTUFBTUgsSUFBNUIsRUFBa0M7QUFBRTtBQUNsQ0ksZUFBVyxJQUFYO0FBQ0QsR0FGRCxNQUVPO0FBQ0xGLGVBQVc3QixPQUFPd0IsY0FBUCxDQUFzQkssUUFBdEIsQ0FBWCxDQURLLENBQ3VDOztBQUU1QyxRQUFJQSxhQUFhLElBQWpCLEVBQXVCO0FBQ3JCRSxpQkFBV3ZCLGFBQWFxQixRQUFiLEVBQXVCQyxLQUF2QixDQUFYO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPQyxRQUFQO0FBQ0QiLCJmaWxlIjoicmVhY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IEVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnQnKSxcbiAgICAgIFJlYWN0Q2xhc3MgPSByZXF1aXJlKCcuL3JlYWN0Q2xhc3MnKSxcbiAgICAgIG5hbWVVdGlsaXRpZXMgPSByZXF1aXJlKCcuL3V0aWxpdGllcy9uYW1lJyksXG4gICAgICBhcnJheVV0aWxpdGllcyA9IHJlcXVpcmUoJy4vdXRpbGl0aWVzL2FycmF5JyksXG4gICAgICBSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vcmVhY3RDb21wb25lbnQnKSxcbiAgICAgIFJlYWN0Q2xhc3NFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3JlYWN0L2NsYXNzJyksXG4gICAgICBSZWFjdEZ1bmN0aW9uRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC9yZWFjdC9mdW5jdGlvbicpLFxuICAgICAgUmVhY3RDb21wb25lbnRFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3JlYWN0L2NvbXBvbmVudCcpLFxuICAgICAgVmlydHVhbERPTVRleHRFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3ZpcnR1YWxET01Ob2RlL3RleHRFbGVtZW50JyksXG4gICAgICBWaXJ0dWFsRE9NSFRNTEVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnQvdmlydHVhbERPTU5vZGUvZWxlbWVudC9odG1sJyksXG4gICAgICBWaXJ0dWFsRE9NU1ZHRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC92aXJ0dWFsRE9NTm9kZS9lbGVtZW50L3N2ZycpO1xuXG5jb25zdCB7IGZsYXR0ZW4gfSA9IGFycmF5VXRpbGl0aWVzLFxuICAgICAgeyBpc1NWR1RhZ05hbWUgfSA9IG5hbWVVdGlsaXRpZXM7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG9iamVjdCkge1xuICByZXR1cm4gUmVhY3RDbGFzcy5jcmVhdGUob2JqZWN0KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudChmaXJzdEFyZ3VtZW50LCBwcm9wZXJ0aWVzLCAuLi5jaGlsZEFyZ3VtZW50cykge1xuICBsZXQgZWxlbWVudCA9IG51bGw7XG5cbiAgaWYgKGZpcnN0QXJndW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gY2hpbGRyZW5Gcm9tQ2hpbGRBcmd1bWVudHMoY2hpbGRBcmd1bWVudHMpLFxuICAgICAgICAgIHByb3BzID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvcGVydGllcywge1xuICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgICB9KTtcblxuICAgIGlmIChmYWxzZSkge1xuICAgICAgLy8vXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmd1bWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IHRhZ05hbWUgPSBmaXJzdEFyZ3VtZW50LCAgLy8vXG4gICAgICAgICAgICB2aXJ0dWFsRE9NRWxlbWVudCA9IGlzU1ZHVGFnTmFtZSh0YWdOYW1lKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZpcnR1YWxET01TVkdFbGVtZW50KHRhZ05hbWUsIHByb3BzKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVmlydHVhbERPTUhUTUxFbGVtZW50KHRhZ05hbWUsIHByb3BzKTtcblxuICAgICAgZWxlbWVudCA9IHZpcnR1YWxET01FbGVtZW50IC8vL1xuICAgIH0gZWxzZSBpZiAoZmlyc3RBcmd1bWVudCBpbnN0YW5jZW9mIFJlYWN0Q2xhc3MpIHtcbiAgICAgIGNvbnN0IHJlYWN0Q2xhc3MgPSBmaXJzdEFyZ3VtZW50LCAvLy9cbiAgICAgICAgICAgIHJlYWN0Q2xhc3NFbGVtZW50ID0gbmV3IFJlYWN0Q2xhc3NFbGVtZW50KHJlYWN0Q2xhc3MsIHByb3BzKTtcblxuICAgICAgZWxlbWVudCA9IHJlYWN0Q2xhc3NFbGVtZW50OyAgLy8vXG5cbiAgICAgIGNvbnN0IHsgbWl4aW5zIH0gPSByZWFjdENsYXNzO1xuXG4gICAgICBhc3NpZ25NaXhpbnMobWl4aW5zLCBlbGVtZW50KTtcbiAgICB9IGVsc2UgaWYgKGlzU3ViY2xhc3NPZihmaXJzdEFyZ3VtZW50LCBSZWFjdENvbXBvbmVudCkpIHtcbiAgICAgIGNvbnN0IFJlYWN0Q29tcG9uZW50ID0gZmlyc3RBcmd1bWVudCwgIC8vL1xuICAgICAgICAgICAgcmVhY3RDb21wb25lbnQgPSBuZXcgUmVhY3RDb21wb25lbnQoKSxcbiAgICAgICAgICAgIHJlYWN0Q29tcG9uZW50RWxlbWVudCA9IG5ldyBSZWFjdENvbXBvbmVudEVsZW1lbnQocmVhY3RDb21wb25lbnQsIHByb3BzKTtcblxuICAgICAgZWxlbWVudCA9IHJlYWN0Q29tcG9uZW50RWxlbWVudDsgIC8vL1xuXG4gICAgICBhc3NpZ25SZWFjdENvbXBvbmVudE1peGlucyhSZWFjdENvbXBvbmVudCwgZWxlbWVudCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmd1bWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc3QgcmVhY3RGdW5jdGlvbiA9IGZpcnN0QXJndW1lbnQsICAvLy9cbiAgICAgICAgICAgIHJlYWN0RnVuY3Rpb25FbGVtZW50ID0gbmV3IFJlYWN0RnVuY3Rpb25FbGVtZW50KHJlYWN0RnVuY3Rpb24sIHByb3BzKTtcblxuICAgICAgZWxlbWVudCA9IHJlYWN0RnVuY3Rpb25FbGVtZW50OyAvLy9cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuY29uc3QgQ29tcG9uZW50ID0gUmVhY3RDb21wb25lbnQsIC8vL1xuICAgICAgUmVhY3QgPSB7XG4gICAgICAgIENvbXBvbmVudCxcbiAgICAgICAgY3JlYXRlQ2xhc3MsXG4gICAgICAgIGNyZWF0ZUVsZW1lbnRcbiAgICAgIH07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cbmZ1bmN0aW9uIGNoaWxkcmVuRnJvbUNoaWxkQXJndW1lbnRzKGNoaWxkQXJndW1lbnRzKSB7XG4gIGNoaWxkQXJndW1lbnRzID0gZmxhdHRlbihjaGlsZEFyZ3VtZW50cyk7IC8vL1xuXG4gIGNvbnN0IGNoaWxkcmVuID0gY2hpbGRBcmd1bWVudHMubWFwKGZ1bmN0aW9uKGNoaWxkQXJndW1lbnQpIHtcbiAgICBsZXQgY2hpbGQ7XG5cbiAgICBpZiAoaXNTdWJjbGFzc09mKGNoaWxkQXJndW1lbnQuY29uc3RydWN0b3IsIEVsZW1lbnQpKSB7IC8vL1xuICAgICAgY2hpbGQgPSBjaGlsZEFyZ3VtZW50OyAgLy8vXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRleHQgPSBjaGlsZEFyZ3VtZW50LCAvLy9cbiAgICAgICAgICAgIHZpcnR1YWxET01UZXh0RWxlbWVudCA9IG5ldyBWaXJ0dWFsRE9NVGV4dEVsZW1lbnQodGV4dCk7XG5cbiAgICAgIGNoaWxkID0gdmlydHVhbERPTVRleHRFbGVtZW50O1xuICAgIH1cblxuICAgIHJldHVybiBjaGlsZDtcbiAgfSk7XG5cbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5mdW5jdGlvbiBhc3NpZ25SZWFjdENvbXBvbmVudE1peGlucyhyZWFjdENvbXBvbmVudCwgZWxlbWVudCkge1xuICBjb25zdCB7IG1peGlucyB9ID0gcmVhY3RDb21wb25lbnQ7XG5cbiAgcmVhY3RDb21wb25lbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocmVhY3RDb21wb25lbnQpOyAvLy9cblxuICBpZiAocmVhY3RDb21wb25lbnQgIT09IFJlYWN0Q29tcG9uZW50KSB7XG4gICAgYXNzaWduUmVhY3RDb21wb25lbnRNaXhpbnMocmVhY3RDb21wb25lbnQsIGVsZW1lbnQpO1xuICB9XG5cbiAgYXNzaWduTWl4aW5zKG1peGlucywgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGFzc2lnbk1peGlucyhtaXhpbnMsIGVsZW1lbnQpIHtcbiAgaWYgKG1peGlucykge1xuICAgIG1peGlucy5mb3JFYWNoKGZ1bmN0aW9uKG1peGluKSB7XG4gICAgICBjb25zdCB7IG5hbWUgfSA9IG1peGluO1xuXG4gICAgICBlbGVtZW50W25hbWVdID0gbWl4aW4uYmluZChlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1N1YmNsYXNzT2YoYXJndW1lbnQsIENsYXNzKSB7XG4gIGxldCBzdWJjbGFzcyA9IGZhbHNlO1xuXG4gIGlmIChhcmd1bWVudC5uYW1lID09PSBDbGFzcy5uYW1lKSB7IC8vL1xuICAgIHN1YmNsYXNzID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBhcmd1bWVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihhcmd1bWVudCk7IC8vL1xuXG4gICAgaWYgKGFyZ3VtZW50ICE9PSBudWxsKSB7XG4gICAgICBzdWJjbGFzcyA9IGlzU3ViY2xhc3NPZihhcmd1bWVudCwgQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdWJjbGFzcztcbn1cbiJdfQ==