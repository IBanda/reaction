'use strict';

var Element = require('./element'),
    ReactClass = require('./reactClass'),
    ReactComponent = require('./reactComponent'),
    ReactClassElement = require('./element/react/class'),
    ReactFunctionElement = require('./element/react/function'),
    ReactComponentElement = require('./element/react/component'),
    VirtualDOMTextElement = require('./element/virtualDOMNode/textElement'),
    VirtualDOMElement = require('./element/virtualDOMNode/element');

function createClass(object) {
  return ReactClass.fromObject(object);
}

function createElement(firstArgument, properties) {
  var element = null;

  if (firstArgument !== undefined) {
    for (var _len = arguments.length, childArguments = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      childArguments[_key - 2] = arguments[_key];
    }

    var children = childrenFromChildArguments(childArguments),
        props = Object.assign({}, properties, {
      children: children
    });

    if (false) {
      ///
    } else if (typeof firstArgument === 'string') {
      var tagName = firstArgument,
          ///
      virtualDOMElement = new VirtualDOMElement(tagName, props);

      element = virtualDOMElement;
    } else if (firstArgument instanceof ReactClass) {
      var reactClass = firstArgument,
          ///
      reactClassElement = new ReactClassElement(reactClass, props);

      element = reactClassElement;

      assignReactClassMixins(reactClass, element);
    } else if (isSubclassOf(firstArgument, ReactComponent)) {
      var _ReactComponent = firstArgument,
          ///
      reactComponent = new _ReactComponent(),
          reactComponentElement = new ReactComponentElement(reactComponent, props);

      element = reactComponentElement;

      assignReactComponentMixins(_ReactComponent, element);
    } else if (typeof firstArgument === 'function') {
      var reactFunction = firstArgument,
          ///
      reactFunctionElement = new ReactFunctionElement(reactFunction, props);

      element = reactFunctionElement;
    }
  }

  return element;
}

var Component = ReactComponent,
    ///
React = {
  Component: Component,
  createClass: createClass,
  createElement: createElement
};

module.exports = React;

function childrenFromChildArguments(childArguments) {
  childArguments = childArguments.reduce(function (childArguments, childArgument) {
    childArguments = childArguments.concat(childArgument);

    return childArguments;
  }, []);

  var children = childArguments.map(function (childArgument) {
    var child = void 0;

    if (childArgument instanceof Element) {
      child = childArgument; ///
    } else {
      var text = childArgument,
          ///
      virtualDOMTextElement = new VirtualDOMTextElement(text);

      child = virtualDOMTextElement;
    }

    return child;
  });

  return children;
}

function assignReactComponentMixins(reactComponent, element) {
  var _reactComponent = reactComponent,
      mixins = _reactComponent.mixins;


  reactComponent = Object.getPrototypeOf(reactComponent); ///

  if (reactComponent !== ReactComponent) {
    assignReactComponentMixins(reactComponent, element);
  }

  assignMixins(mixins, element);
}

function assignReactClassMixins(reactClass, element) {
  var mixins = reactClass.mixins;


  assignMixins(mixins, element);
}

function assignMixins(mixins, element) {
  if (mixins) {
    mixins.forEach(function (mixin) {
      var name = mixin.name;


      element[name] = mixin.bind(element);
    });
  }
}

function isSubclassOf(argument, Class) {
  var subclass = false;

  if (argument === Class) {
    ///
    subclass = true;
  } else {
    argument = Object.getPrototypeOf(argument); ///

    if (argument !== null) {
      subclass = isSubclassOf(argument, Class);
    }
  }

  return subclass;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9yZWFjdC5qcyJdLCJuYW1lcyI6WyJFbGVtZW50IiwicmVxdWlyZSIsIlJlYWN0Q2xhc3MiLCJSZWFjdENvbXBvbmVudCIsIlJlYWN0Q2xhc3NFbGVtZW50IiwiUmVhY3RGdW5jdGlvbkVsZW1lbnQiLCJSZWFjdENvbXBvbmVudEVsZW1lbnQiLCJWaXJ0dWFsRE9NVGV4dEVsZW1lbnQiLCJWaXJ0dWFsRE9NRWxlbWVudCIsImNyZWF0ZUNsYXNzIiwib2JqZWN0IiwiZnJvbU9iamVjdCIsImNyZWF0ZUVsZW1lbnQiLCJmaXJzdEFyZ3VtZW50IiwicHJvcGVydGllcyIsImVsZW1lbnQiLCJ1bmRlZmluZWQiLCJjaGlsZEFyZ3VtZW50cyIsImNoaWxkcmVuIiwiY2hpbGRyZW5Gcm9tQ2hpbGRBcmd1bWVudHMiLCJwcm9wcyIsIk9iamVjdCIsImFzc2lnbiIsInRhZ05hbWUiLCJ2aXJ0dWFsRE9NRWxlbWVudCIsInJlYWN0Q2xhc3MiLCJyZWFjdENsYXNzRWxlbWVudCIsImFzc2lnblJlYWN0Q2xhc3NNaXhpbnMiLCJpc1N1YmNsYXNzT2YiLCJyZWFjdENvbXBvbmVudCIsInJlYWN0Q29tcG9uZW50RWxlbWVudCIsImFzc2lnblJlYWN0Q29tcG9uZW50TWl4aW5zIiwicmVhY3RGdW5jdGlvbiIsInJlYWN0RnVuY3Rpb25FbGVtZW50IiwiQ29tcG9uZW50IiwiUmVhY3QiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVkdWNlIiwiY2hpbGRBcmd1bWVudCIsImNvbmNhdCIsIm1hcCIsImNoaWxkIiwidGV4dCIsInZpcnR1YWxET01UZXh0RWxlbWVudCIsIm1peGlucyIsImdldFByb3RvdHlwZU9mIiwiYXNzaWduTWl4aW5zIiwiZm9yRWFjaCIsIm1peGluIiwibmFtZSIsImJpbmQiLCJhcmd1bWVudCIsIkNsYXNzIiwic3ViY2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFVBQVVDLFFBQVEsV0FBUixDQUFoQjtBQUFBLElBQ01DLGFBQWFELFFBQVEsY0FBUixDQURuQjtBQUFBLElBRU1FLGlCQUFpQkYsUUFBUSxrQkFBUixDQUZ2QjtBQUFBLElBR01HLG9CQUFvQkgsUUFBUSx1QkFBUixDQUgxQjtBQUFBLElBSU1JLHVCQUF1QkosUUFBUSwwQkFBUixDQUo3QjtBQUFBLElBS01LLHdCQUF3QkwsUUFBUSwyQkFBUixDQUw5QjtBQUFBLElBTU1NLHdCQUF3Qk4sUUFBUSxzQ0FBUixDQU45QjtBQUFBLElBT01PLG9CQUFvQlAsUUFBUSxrQ0FBUixDQVAxQjs7QUFTQSxTQUFTUSxXQUFULENBQXFCQyxNQUFyQixFQUE2QjtBQUMzQixTQUFPUixXQUFXUyxVQUFYLENBQXNCRCxNQUF0QixDQUFQO0FBQ0Q7O0FBRUQsU0FBU0UsYUFBVCxDQUF1QkMsYUFBdkIsRUFBc0NDLFVBQXRDLEVBQXFFO0FBQ25FLE1BQUlDLFVBQVUsSUFBZDs7QUFFQSxNQUFJRixrQkFBa0JHLFNBQXRCLEVBQWlDO0FBQUEsc0NBSGtCQyxjQUdsQjtBQUhrQkEsb0JBR2xCO0FBQUE7O0FBQy9CLFFBQU1DLFdBQVdDLDJCQUEyQkYsY0FBM0IsQ0FBakI7QUFBQSxRQUNNRyxRQUFRQyxPQUFPQyxNQUFQLENBQWMsRUFBZCxFQUFrQlIsVUFBbEIsRUFBOEI7QUFDcENJO0FBRG9DLEtBQTlCLENBRGQ7O0FBS0EsUUFBSSxLQUFKLEVBQVc7QUFDVDtBQUNELEtBRkQsTUFFTyxJQUFJLE9BQU9MLGFBQVAsS0FBeUIsUUFBN0IsRUFBdUM7QUFDNUMsVUFBTVUsVUFBVVYsYUFBaEI7QUFBQSxVQUFnQztBQUMxQlcsMEJBQW9CLElBQUloQixpQkFBSixDQUFzQmUsT0FBdEIsRUFBK0JILEtBQS9CLENBRDFCOztBQUdBTCxnQkFBVVMsaUJBQVY7QUFDRCxLQUxNLE1BS0EsSUFBSVgseUJBQXlCWCxVQUE3QixFQUF5QztBQUM5QyxVQUFNdUIsYUFBYVosYUFBbkI7QUFBQSxVQUFrQztBQUM1QmEsMEJBQW9CLElBQUl0QixpQkFBSixDQUFzQnFCLFVBQXRCLEVBQWtDTCxLQUFsQyxDQUQxQjs7QUFHQUwsZ0JBQVVXLGlCQUFWOztBQUVBQyw2QkFBdUJGLFVBQXZCLEVBQW1DVixPQUFuQztBQUNELEtBUE0sTUFPQSxJQUFJYSxhQUFhZixhQUFiLEVBQTRCVixjQUE1QixDQUFKLEVBQWlEO0FBQ3RELFVBQU1BLGtCQUFpQlUsYUFBdkI7QUFBQSxVQUF1QztBQUNqQ2dCLHVCQUFpQixJQUFJMUIsZUFBSixFQUR2QjtBQUFBLFVBRU0yQix3QkFBd0IsSUFBSXhCLHFCQUFKLENBQTBCdUIsY0FBMUIsRUFBMENULEtBQTFDLENBRjlCOztBQUlBTCxnQkFBVWUscUJBQVY7O0FBRUFDLGlDQUEyQjVCLGVBQTNCLEVBQTJDWSxPQUEzQztBQUNELEtBUk0sTUFRQSxJQUFJLE9BQU9GLGFBQVAsS0FBeUIsVUFBN0IsRUFBeUM7QUFDOUMsVUFBTW1CLGdCQUFnQm5CLGFBQXRCO0FBQUEsVUFBc0M7QUFDaENvQiw2QkFBdUIsSUFBSTVCLG9CQUFKLENBQXlCMkIsYUFBekIsRUFBd0NaLEtBQXhDLENBRDdCOztBQUdBTCxnQkFBVWtCLG9CQUFWO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPbEIsT0FBUDtBQUNEOztBQUVELElBQU1tQixZQUFZL0IsY0FBbEI7QUFBQSxJQUFrQztBQUM1QmdDLFFBQVE7QUFDTkQsc0JBRE07QUFFTnpCLDBCQUZNO0FBR05HO0FBSE0sQ0FEZDs7QUFPQXdCLE9BQU9DLE9BQVAsR0FBaUJGLEtBQWpCOztBQUVBLFNBQVNoQiwwQkFBVCxDQUFvQ0YsY0FBcEMsRUFBb0Q7QUFDbERBLG1CQUFpQkEsZUFBZXFCLE1BQWYsQ0FBc0IsVUFBU3JCLGNBQVQsRUFBeUJzQixhQUF6QixFQUF3QztBQUM3RXRCLHFCQUFpQkEsZUFBZXVCLE1BQWYsQ0FBc0JELGFBQXRCLENBQWpCOztBQUVBLFdBQU90QixjQUFQO0FBQ0QsR0FKZ0IsRUFJZCxFQUpjLENBQWpCOztBQU1BLE1BQU1DLFdBQVdELGVBQWV3QixHQUFmLENBQW1CLFVBQVNGLGFBQVQsRUFBd0I7QUFDMUQsUUFBSUcsY0FBSjs7QUFFQSxRQUFJSCx5QkFBeUJ2QyxPQUE3QixFQUFzQztBQUNwQzBDLGNBQVFILGFBQVIsQ0FEb0MsQ0FDWjtBQUN6QixLQUZELE1BRU87QUFDTCxVQUFNSSxPQUFPSixhQUFiO0FBQUEsVUFBNEI7QUFDdEJLLDhCQUF3QixJQUFJckMscUJBQUosQ0FBMEJvQyxJQUExQixDQUQ5Qjs7QUFHQUQsY0FBUUUscUJBQVI7QUFDRDs7QUFFRCxXQUFPRixLQUFQO0FBQ0QsR0FiZ0IsQ0FBakI7O0FBZUEsU0FBT3hCLFFBQVA7QUFDRDs7QUFFRCxTQUFTYSwwQkFBVCxDQUFvQ0YsY0FBcEMsRUFBb0RkLE9BQXBELEVBQTZEO0FBQUEsd0JBQ3hDYyxjQUR3QztBQUFBLE1BQ25EZ0IsTUFEbUQsbUJBQ25EQSxNQURtRDs7O0FBRzNEaEIsbUJBQWlCUixPQUFPeUIsY0FBUCxDQUFzQmpCLGNBQXRCLENBQWpCLENBSDJELENBR0g7O0FBRXhELE1BQUlBLG1CQUFtQjFCLGNBQXZCLEVBQXVDO0FBQ3JDNEIsK0JBQTJCRixjQUEzQixFQUEyQ2QsT0FBM0M7QUFDRDs7QUFFRGdDLGVBQWFGLE1BQWIsRUFBcUI5QixPQUFyQjtBQUNEOztBQUVELFNBQVNZLHNCQUFULENBQWdDRixVQUFoQyxFQUE0Q1YsT0FBNUMsRUFBcUQ7QUFBQSxNQUMzQzhCLE1BRDJDLEdBQ2hDcEIsVUFEZ0MsQ0FDM0NvQixNQUQyQzs7O0FBR25ERSxlQUFhRixNQUFiLEVBQXFCOUIsT0FBckI7QUFDRDs7QUFFRCxTQUFTZ0MsWUFBVCxDQUFzQkYsTUFBdEIsRUFBOEI5QixPQUE5QixFQUF1QztBQUNyQyxNQUFJOEIsTUFBSixFQUFZO0FBQ1ZBLFdBQU9HLE9BQVAsQ0FBZSxVQUFTQyxLQUFULEVBQWdCO0FBQUEsVUFDckJDLElBRHFCLEdBQ1pELEtBRFksQ0FDckJDLElBRHFCOzs7QUFHN0JuQyxjQUFRbUMsSUFBUixJQUFnQkQsTUFBTUUsSUFBTixDQUFXcEMsT0FBWCxDQUFoQjtBQUNELEtBSkQ7QUFLRDtBQUNGOztBQUVELFNBQVNhLFlBQVQsQ0FBc0J3QixRQUF0QixFQUFnQ0MsS0FBaEMsRUFBdUM7QUFDckMsTUFBSUMsV0FBVyxLQUFmOztBQUVBLE1BQUlGLGFBQWFDLEtBQWpCLEVBQXdCO0FBQUk7QUFDMUJDLGVBQVcsSUFBWDtBQUNELEdBRkQsTUFFTztBQUNMRixlQUFXL0IsT0FBT3lCLGNBQVAsQ0FBc0JNLFFBQXRCLENBQVgsQ0FESyxDQUN1Qzs7QUFFNUMsUUFBSUEsYUFBYSxJQUFqQixFQUF1QjtBQUNyQkUsaUJBQVcxQixhQUFhd0IsUUFBYixFQUF1QkMsS0FBdkIsQ0FBWDtBQUNEO0FBQ0Y7O0FBRUQsU0FBT0MsUUFBUDtBQUNEIiwiZmlsZSI6InJlYWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50JyksXG4gICAgICBSZWFjdENsYXNzID0gcmVxdWlyZSgnLi9yZWFjdENsYXNzJyksXG4gICAgICBSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vcmVhY3RDb21wb25lbnQnKSxcbiAgICAgIFJlYWN0Q2xhc3NFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3JlYWN0L2NsYXNzJyksXG4gICAgICBSZWFjdEZ1bmN0aW9uRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC9yZWFjdC9mdW5jdGlvbicpLFxuICAgICAgUmVhY3RDb21wb25lbnRFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3JlYWN0L2NvbXBvbmVudCcpLFxuICAgICAgVmlydHVhbERPTVRleHRFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3ZpcnR1YWxET01Ob2RlL3RleHRFbGVtZW50JyksXG4gICAgICBWaXJ0dWFsRE9NRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC92aXJ0dWFsRE9NTm9kZS9lbGVtZW50Jyk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG9iamVjdCkge1xuICByZXR1cm4gUmVhY3RDbGFzcy5mcm9tT2JqZWN0KG9iamVjdCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZmlyc3RBcmd1bWVudCwgcHJvcGVydGllcywgLi4uY2hpbGRBcmd1bWVudHMpIHtcbiAgbGV0IGVsZW1lbnQgPSBudWxsO1xuXG4gIGlmIChmaXJzdEFyZ3VtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IGNoaWxkcmVuRnJvbUNoaWxkQXJndW1lbnRzKGNoaWxkQXJndW1lbnRzKSxcbiAgICAgICAgICBwcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BlcnRpZXMsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgfSk7XG5cbiAgICBpZiAoZmFsc2UpIHtcbiAgICAgIC8vL1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJndW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCB0YWdOYW1lID0gZmlyc3RBcmd1bWVudCwgIC8vL1xuICAgICAgICAgICAgdmlydHVhbERPTUVsZW1lbnQgPSBuZXcgVmlydHVhbERPTUVsZW1lbnQodGFnTmFtZSwgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gdmlydHVhbERPTUVsZW1lbnRcbiAgICB9IGVsc2UgaWYgKGZpcnN0QXJndW1lbnQgaW5zdGFuY2VvZiBSZWFjdENsYXNzKSB7XG4gICAgICBjb25zdCByZWFjdENsYXNzID0gZmlyc3RBcmd1bWVudCwgLy8vXG4gICAgICAgICAgICByZWFjdENsYXNzRWxlbWVudCA9IG5ldyBSZWFjdENsYXNzRWxlbWVudChyZWFjdENsYXNzLCBwcm9wcyk7XG5cbiAgICAgIGVsZW1lbnQgPSByZWFjdENsYXNzRWxlbWVudDtcblxuICAgICAgYXNzaWduUmVhY3RDbGFzc01peGlucyhyZWFjdENsYXNzLCBlbGVtZW50KTtcbiAgICB9IGVsc2UgaWYgKGlzU3ViY2xhc3NPZihmaXJzdEFyZ3VtZW50LCBSZWFjdENvbXBvbmVudCkpIHtcbiAgICAgIGNvbnN0IFJlYWN0Q29tcG9uZW50ID0gZmlyc3RBcmd1bWVudCwgIC8vL1xuICAgICAgICAgICAgcmVhY3RDb21wb25lbnQgPSBuZXcgUmVhY3RDb21wb25lbnQoKSxcbiAgICAgICAgICAgIHJlYWN0Q29tcG9uZW50RWxlbWVudCA9IG5ldyBSZWFjdENvbXBvbmVudEVsZW1lbnQocmVhY3RDb21wb25lbnQsIHByb3BzKTtcblxuICAgICAgZWxlbWVudCA9IHJlYWN0Q29tcG9uZW50RWxlbWVudDtcblxuICAgICAgYXNzaWduUmVhY3RDb21wb25lbnRNaXhpbnMoUmVhY3RDb21wb25lbnQsIGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJndW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnN0IHJlYWN0RnVuY3Rpb24gPSBmaXJzdEFyZ3VtZW50LCAgLy8vXG4gICAgICAgICAgICByZWFjdEZ1bmN0aW9uRWxlbWVudCA9IG5ldyBSZWFjdEZ1bmN0aW9uRWxlbWVudChyZWFjdEZ1bmN0aW9uLCBwcm9wcyk7XG5cbiAgICAgIGVsZW1lbnQgPSByZWFjdEZ1bmN0aW9uRWxlbWVudDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuY29uc3QgQ29tcG9uZW50ID0gUmVhY3RDb21wb25lbnQsIC8vL1xuICAgICAgUmVhY3QgPSB7XG4gICAgICAgIENvbXBvbmVudCxcbiAgICAgICAgY3JlYXRlQ2xhc3MsXG4gICAgICAgIGNyZWF0ZUVsZW1lbnRcbiAgICAgIH07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cbmZ1bmN0aW9uIGNoaWxkcmVuRnJvbUNoaWxkQXJndW1lbnRzKGNoaWxkQXJndW1lbnRzKSB7XG4gIGNoaWxkQXJndW1lbnRzID0gY2hpbGRBcmd1bWVudHMucmVkdWNlKGZ1bmN0aW9uKGNoaWxkQXJndW1lbnRzLCBjaGlsZEFyZ3VtZW50KSB7XG4gICAgY2hpbGRBcmd1bWVudHMgPSBjaGlsZEFyZ3VtZW50cy5jb25jYXQoY2hpbGRBcmd1bWVudCk7XG5cbiAgICByZXR1cm4gY2hpbGRBcmd1bWVudHM7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjaGlsZHJlbiA9IGNoaWxkQXJndW1lbnRzLm1hcChmdW5jdGlvbihjaGlsZEFyZ3VtZW50KSB7XG4gICAgbGV0IGNoaWxkO1xuXG4gICAgaWYgKGNoaWxkQXJndW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICBjaGlsZCA9IGNoaWxkQXJndW1lbnQ7ICAvLy9cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGV4dCA9IGNoaWxkQXJndW1lbnQsIC8vL1xuICAgICAgICAgICAgdmlydHVhbERPTVRleHRFbGVtZW50ID0gbmV3IFZpcnR1YWxET01UZXh0RWxlbWVudCh0ZXh0KTtcblxuICAgICAgY2hpbGQgPSB2aXJ0dWFsRE9NVGV4dEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9KTtcblxuICByZXR1cm4gY2hpbGRyZW47XG59XG5cbmZ1bmN0aW9uIGFzc2lnblJlYWN0Q29tcG9uZW50TWl4aW5zKHJlYWN0Q29tcG9uZW50LCBlbGVtZW50KSB7XG4gIGNvbnN0IHsgbWl4aW5zIH0gPSByZWFjdENvbXBvbmVudDtcblxuICByZWFjdENvbXBvbmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihyZWFjdENvbXBvbmVudCk7IC8vL1xuXG4gIGlmIChyZWFjdENvbXBvbmVudCAhPT0gUmVhY3RDb21wb25lbnQpIHtcbiAgICBhc3NpZ25SZWFjdENvbXBvbmVudE1peGlucyhyZWFjdENvbXBvbmVudCwgZWxlbWVudCk7XG4gIH1cbiAgXG4gIGFzc2lnbk1peGlucyhtaXhpbnMsIGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBhc3NpZ25SZWFjdENsYXNzTWl4aW5zKHJlYWN0Q2xhc3MsIGVsZW1lbnQpIHtcbiAgY29uc3QgeyBtaXhpbnMgfSA9IHJlYWN0Q2xhc3M7XG5cbiAgYXNzaWduTWl4aW5zKG1peGlucywgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGFzc2lnbk1peGlucyhtaXhpbnMsIGVsZW1lbnQpIHtcbiAgaWYgKG1peGlucykge1xuICAgIG1peGlucy5mb3JFYWNoKGZ1bmN0aW9uKG1peGluKSB7XG4gICAgICBjb25zdCB7IG5hbWUgfSA9IG1peGluO1xuXG4gICAgICBlbGVtZW50W25hbWVdID0gbWl4aW4uYmluZChlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1N1YmNsYXNzT2YoYXJndW1lbnQsIENsYXNzKSB7XG4gIGxldCBzdWJjbGFzcyA9IGZhbHNlO1xuXG4gIGlmIChhcmd1bWVudCA9PT0gQ2xhc3MpIHsgICAvLy9cbiAgICBzdWJjbGFzcyA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgYXJndW1lbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXJndW1lbnQpOyAvLy9cblxuICAgIGlmIChhcmd1bWVudCAhPT0gbnVsbCkge1xuICAgICAgc3ViY2xhc3MgPSBpc1N1YmNsYXNzT2YoYXJndW1lbnQsIENsYXNzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3ViY2xhc3M7XG59XG4iXX0=