'use strict';

var Element = require('./element'),
    ReactClass = require('./reactClass'),
    ReactComponent = require('./reactComponent'),
    ReactClassElement = require('./element/react/class'),
    ReactFunctionElement = require('./element/react/function'),
    ReactComponentElement = require('./element/react/component'),
    VirtualDOMTextElement = require('./element/virtualDOMNode/textElement'),
    VirtualDOMElement = require('./element/virtualDOMNode/element');

function createClass(object) {
  return ReactClass.create(object);
}

function createElement(firstArgument, properties) {
  var element = null;

  if (firstArgument !== undefined) {
    for (var _len = arguments.length, childArguments = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      childArguments[_key - 2] = arguments[_key];
    }

    var children = childrenFromChildArguments(childArguments),
        props = Object.assign({}, properties, {
      children: children
    });

    if (false) {
      ///
    } else if (typeof firstArgument === 'string') {
      var tagName = firstArgument,
          ///
      virtualDOMElement = new VirtualDOMElement(tagName, props);

      element = virtualDOMElement; ///
    } else if (firstArgument instanceof ReactClass) {
      var reactClass = firstArgument,
          ///
      reactClassElement = new ReactClassElement(reactClass, props);

      element = reactClassElement; ///

      var mixins = reactClass.mixins;


      assignMixins(mixins, element);
    } else if (isSubclassOf(firstArgument, ReactComponent)) {
      var _ReactComponent = firstArgument,
          ///
      reactComponent = new _ReactComponent(),
          reactComponentElement = new ReactComponentElement(reactComponent, props);

      element = reactComponentElement; ///

      assignReactComponentMixins(_ReactComponent, element);
    } else if (typeof firstArgument === 'function') {
      var reactFunction = firstArgument,
          ///
      reactFunctionElement = new ReactFunctionElement(reactFunction, props);

      element = reactFunctionElement; ///

      var _mixins = reactFunction.mixins;


      assignMixins(_mixins, element);
    }
  }

  return element;
}

var Component = ReactComponent,
    ///
React = {
  Component: Component,
  createClass: createClass,
  createElement: createElement
};

module.exports = React;

function childrenFromChildArguments(childArguments) {
  childArguments = childArguments.reduce(function (childArguments, childArgument) {
    childArguments = childArguments.concat(childArgument);

    return childArguments;
  }, []);

  var children = childArguments.map(function (childArgument) {
    var child = void 0;

    if (childArgument instanceof Element) {
      child = childArgument; ///
    } else {
      var text = childArgument,
          ///
      virtualDOMTextElement = new VirtualDOMTextElement(text);

      child = virtualDOMTextElement;
    }

    return child;
  });

  return children;
}

function assignReactComponentMixins(reactComponent, element) {
  var _reactComponent = reactComponent,
      mixins = _reactComponent.mixins;


  reactComponent = Object.getPrototypeOf(reactComponent); ///

  if (reactComponent !== ReactComponent) {
    assignReactComponentMixins(reactComponent, element);
  }

  assignMixins(mixins, element);
}

function assignMixins(mixins, element) {
  if (mixins) {
    mixins.forEach(function (mixin) {
      var name = mixin.name;


      element[name] = mixin.bind(element);
    });
  }
}

function isSubclassOf(argument, Class) {
  var subclass = false;

  if (argument === Class) {
    ///
    subclass = true;
  } else {
    argument = Object.getPrototypeOf(argument); ///

    if (argument !== null) {
      subclass = isSubclassOf(argument, Class);
    }
  }

  return subclass;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9yZWFjdC5qcyJdLCJuYW1lcyI6WyJFbGVtZW50IiwicmVxdWlyZSIsIlJlYWN0Q2xhc3MiLCJSZWFjdENvbXBvbmVudCIsIlJlYWN0Q2xhc3NFbGVtZW50IiwiUmVhY3RGdW5jdGlvbkVsZW1lbnQiLCJSZWFjdENvbXBvbmVudEVsZW1lbnQiLCJWaXJ0dWFsRE9NVGV4dEVsZW1lbnQiLCJWaXJ0dWFsRE9NRWxlbWVudCIsImNyZWF0ZUNsYXNzIiwib2JqZWN0IiwiY3JlYXRlIiwiY3JlYXRlRWxlbWVudCIsImZpcnN0QXJndW1lbnQiLCJwcm9wZXJ0aWVzIiwiZWxlbWVudCIsInVuZGVmaW5lZCIsImNoaWxkQXJndW1lbnRzIiwiY2hpbGRyZW4iLCJjaGlsZHJlbkZyb21DaGlsZEFyZ3VtZW50cyIsInByb3BzIiwiT2JqZWN0IiwiYXNzaWduIiwidGFnTmFtZSIsInZpcnR1YWxET01FbGVtZW50IiwicmVhY3RDbGFzcyIsInJlYWN0Q2xhc3NFbGVtZW50IiwibWl4aW5zIiwiYXNzaWduTWl4aW5zIiwiaXNTdWJjbGFzc09mIiwicmVhY3RDb21wb25lbnQiLCJyZWFjdENvbXBvbmVudEVsZW1lbnQiLCJhc3NpZ25SZWFjdENvbXBvbmVudE1peGlucyIsInJlYWN0RnVuY3Rpb24iLCJyZWFjdEZ1bmN0aW9uRWxlbWVudCIsIkNvbXBvbmVudCIsIlJlYWN0IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlZHVjZSIsImNoaWxkQXJndW1lbnQiLCJjb25jYXQiLCJtYXAiLCJjaGlsZCIsInRleHQiLCJ2aXJ0dWFsRE9NVGV4dEVsZW1lbnQiLCJnZXRQcm90b3R5cGVPZiIsImZvckVhY2giLCJtaXhpbiIsIm5hbWUiLCJiaW5kIiwiYXJndW1lbnQiLCJDbGFzcyIsInN1YmNsYXNzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxVQUFVQyxRQUFRLFdBQVIsQ0FBaEI7QUFBQSxJQUNNQyxhQUFhRCxRQUFRLGNBQVIsQ0FEbkI7QUFBQSxJQUVNRSxp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QXNCc0IsUUFBdEIsRUFBZ0NDLEtBQWhDLEVBQXVDO0FBQ3JDLE1BQUlDLFdBQVcsS0FBZjs7QUFFQSxNQUFJRixhQUFhQyxLQUFqQixFQUF3QjtBQUFJO0FBQzFCQyxlQUFXLElBQVg7QUFDRCxHQUZELE1BRU87QUFDTEYsZUFBVzlCLE9BQU95QixjQUFQLENBQXNCSyxRQUF0QixDQUFYLENBREssQ0FDdUM7O0FBRTVDLFFBQUlBLGFBQWEsSUFBakIsRUFBdUI7QUFDckJFLGlCQUFXeEIsYUFBYXNCLFFBQWIsRUFBdUJDLEtBQXZCLENBQVg7QUFDRDtBQUNGOztBQUVELFNBQU9DLFFBQVA7QUFDRCIsImZpbGUiOiJyZWFjdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudCcpLFxuICAgICAgUmVhY3RDbGFzcyA9IHJlcXVpcmUoJy4vcmVhY3RDbGFzcycpLFxuICAgICAgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL3JlYWN0Q29tcG9uZW50JyksXG4gICAgICBSZWFjdENsYXNzRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC9yZWFjdC9jbGFzcycpLFxuICAgICAgUmVhY3RGdW5jdGlvbkVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnQvcmVhY3QvZnVuY3Rpb24nKSxcbiAgICAgIFJlYWN0Q29tcG9uZW50RWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC9yZWFjdC9jb21wb25lbnQnKSxcbiAgICAgIFZpcnR1YWxET01UZXh0RWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC92aXJ0dWFsRE9NTm9kZS90ZXh0RWxlbWVudCcpLFxuICAgICAgVmlydHVhbERPTUVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnQvdmlydHVhbERPTU5vZGUvZWxlbWVudCcpO1xuXG5mdW5jdGlvbiBjcmVhdGVDbGFzcyhvYmplY3QpIHtcbiAgcmV0dXJuIFJlYWN0Q2xhc3MuY3JlYXRlKG9iamVjdCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZmlyc3RBcmd1bWVudCwgcHJvcGVydGllcywgLi4uY2hpbGRBcmd1bWVudHMpIHtcbiAgbGV0IGVsZW1lbnQgPSBudWxsO1xuXG4gIGlmIChmaXJzdEFyZ3VtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IGNoaWxkcmVuRnJvbUNoaWxkQXJndW1lbnRzKGNoaWxkQXJndW1lbnRzKSxcbiAgICAgICAgICBwcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BlcnRpZXMsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgfSk7XG5cbiAgICBpZiAoZmFsc2UpIHtcbiAgICAgIC8vL1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJndW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCB0YWdOYW1lID0gZmlyc3RBcmd1bWVudCwgIC8vL1xuICAgICAgICAgICAgdmlydHVhbERPTUVsZW1lbnQgPSBuZXcgVmlydHVhbERPTUVsZW1lbnQodGFnTmFtZSwgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gdmlydHVhbERPTUVsZW1lbnQgLy8vXG4gICAgfSBlbHNlIGlmIChmaXJzdEFyZ3VtZW50IGluc3RhbmNlb2YgUmVhY3RDbGFzcykge1xuICAgICAgY29uc3QgcmVhY3RDbGFzcyA9IGZpcnN0QXJndW1lbnQsIC8vL1xuICAgICAgICAgICAgcmVhY3RDbGFzc0VsZW1lbnQgPSBuZXcgUmVhY3RDbGFzc0VsZW1lbnQocmVhY3RDbGFzcywgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gcmVhY3RDbGFzc0VsZW1lbnQ7ICAvLy9cblxuICAgICAgY29uc3QgeyBtaXhpbnMgfSA9IHJlYWN0Q2xhc3M7XG5cbiAgICAgIGFzc2lnbk1peGlucyhtaXhpbnMsIGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNTdWJjbGFzc09mKGZpcnN0QXJndW1lbnQsIFJlYWN0Q29tcG9uZW50KSkge1xuICAgICAgY29uc3QgUmVhY3RDb21wb25lbnQgPSBmaXJzdEFyZ3VtZW50LCAgLy8vXG4gICAgICAgICAgICByZWFjdENvbXBvbmVudCA9IG5ldyBSZWFjdENvbXBvbmVudCgpLFxuICAgICAgICAgICAgcmVhY3RDb21wb25lbnRFbGVtZW50ID0gbmV3IFJlYWN0Q29tcG9uZW50RWxlbWVudChyZWFjdENvbXBvbmVudCwgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gcmVhY3RDb21wb25lbnRFbGVtZW50OyAgLy8vXG5cbiAgICAgIGFzc2lnblJlYWN0Q29tcG9uZW50TWl4aW5zKFJlYWN0Q29tcG9uZW50LCBlbGVtZW50KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZ3VtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zdCByZWFjdEZ1bmN0aW9uID0gZmlyc3RBcmd1bWVudCwgIC8vL1xuICAgICAgICAgICAgcmVhY3RGdW5jdGlvbkVsZW1lbnQgPSBuZXcgUmVhY3RGdW5jdGlvbkVsZW1lbnQocmVhY3RGdW5jdGlvbiwgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gcmVhY3RGdW5jdGlvbkVsZW1lbnQ7IC8vL1xuXG4gICAgICBjb25zdCB7IG1peGlucyB9ID0gcmVhY3RGdW5jdGlvbjtcblxuICAgICAgYXNzaWduTWl4aW5zKG1peGlucywgZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmNvbnN0IENvbXBvbmVudCA9IFJlYWN0Q29tcG9uZW50LCAvLy9cbiAgICAgIFJlYWN0ID0ge1xuICAgICAgICBDb21wb25lbnQsXG4gICAgICAgIGNyZWF0ZUNsYXNzLFxuICAgICAgICBjcmVhdGVFbGVtZW50XG4gICAgICB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0O1xuXG5mdW5jdGlvbiBjaGlsZHJlbkZyb21DaGlsZEFyZ3VtZW50cyhjaGlsZEFyZ3VtZW50cykge1xuICBjaGlsZEFyZ3VtZW50cyA9IGNoaWxkQXJndW1lbnRzLnJlZHVjZShmdW5jdGlvbihjaGlsZEFyZ3VtZW50cywgY2hpbGRBcmd1bWVudCkge1xuICAgIGNoaWxkQXJndW1lbnRzID0gY2hpbGRBcmd1bWVudHMuY29uY2F0KGNoaWxkQXJndW1lbnQpO1xuXG4gICAgcmV0dXJuIGNoaWxkQXJndW1lbnRzO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZEFyZ3VtZW50cy5tYXAoZnVuY3Rpb24oY2hpbGRBcmd1bWVudCkge1xuICAgIGxldCBjaGlsZDtcblxuICAgIGlmIChjaGlsZEFyZ3VtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgY2hpbGQgPSBjaGlsZEFyZ3VtZW50OyAgLy8vXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRleHQgPSBjaGlsZEFyZ3VtZW50LCAvLy9cbiAgICAgICAgICAgIHZpcnR1YWxET01UZXh0RWxlbWVudCA9IG5ldyBWaXJ0dWFsRE9NVGV4dEVsZW1lbnQodGV4dCk7XG5cbiAgICAgIGNoaWxkID0gdmlydHVhbERPTVRleHRFbGVtZW50O1xuICAgIH1cblxuICAgIHJldHVybiBjaGlsZDtcbiAgfSk7XG5cbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5mdW5jdGlvbiBhc3NpZ25SZWFjdENvbXBvbmVudE1peGlucyhyZWFjdENvbXBvbmVudCwgZWxlbWVudCkge1xuICBjb25zdCB7IG1peGlucyB9ID0gcmVhY3RDb21wb25lbnQ7XG5cbiAgcmVhY3RDb21wb25lbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocmVhY3RDb21wb25lbnQpOyAvLy9cblxuICBpZiAocmVhY3RDb21wb25lbnQgIT09IFJlYWN0Q29tcG9uZW50KSB7XG4gICAgYXNzaWduUmVhY3RDb21wb25lbnRNaXhpbnMocmVhY3RDb21wb25lbnQsIGVsZW1lbnQpO1xuICB9XG5cbiAgYXNzaWduTWl4aW5zKG1peGlucywgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGFzc2lnbk1peGlucyhtaXhpbnMsIGVsZW1lbnQpIHtcbiAgaWYgKG1peGlucykge1xuICAgIG1peGlucy5mb3JFYWNoKGZ1bmN0aW9uKG1peGluKSB7XG4gICAgICBjb25zdCB7IG5hbWUgfSA9IG1peGluO1xuXG4gICAgICBlbGVtZW50W25hbWVdID0gbWl4aW4uYmluZChlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1N1YmNsYXNzT2YoYXJndW1lbnQsIENsYXNzKSB7XG4gIGxldCBzdWJjbGFzcyA9IGZhbHNlO1xuXG4gIGlmIChhcmd1bWVudCA9PT0gQ2xhc3MpIHsgICAvLy9cbiAgICBzdWJjbGFzcyA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgYXJndW1lbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXJndW1lbnQpOyAvLy9cblxuICAgIGlmIChhcmd1bWVudCAhPT0gbnVsbCkge1xuICAgICAgc3ViY2xhc3MgPSBpc1N1YmNsYXNzT2YoYXJndW1lbnQsIENsYXNzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3ViY2xhc3M7XG59XG4iXX0=