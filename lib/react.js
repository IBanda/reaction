'use strict';

var Element = require('./element'),
    ReactClass = require('./reactClass'),
    nameUtilities = require('./utilities/name'),
    arrayUtilities = require('./utilities/array'),
    ReactComponent = require('./reactComponent'),
    ReactClassElement = require('./element/react/class'),
    ReactFunctionElement = require('./element/react/function'),
    ReactComponentElement = require('./element/react/component'),
    VirtualDOMTextElement = require('./element/virtualDOMNode/textElement'),
    VirtualDOMHTMLElement = require('./element/virtualDOMNode/element/html'),
    VirtualDOMSVGElement = require('./element/virtualDOMNode/element/svg');

var flatten = arrayUtilities.flatten,
    isSVGTagName = nameUtilities.isSVGTagName;


function createClass(object) {
  return ReactClass.create(object);
}

function createElement(firstArgument, properties) {
  var element = null;

  if (firstArgument !== undefined) {
    for (var _len = arguments.length, childArguments = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      childArguments[_key - 2] = arguments[_key];
    }

    var children = childrenFromChildArguments(childArguments),
        props = Object.assign({}, properties, {
      children: children
    });

    if (false) {
      ///
    } else if (typeof firstArgument === 'string') {
      var tagName = firstArgument,
          ///
      virtualDOMElement = isSVGTagName(tagName) ? new VirtualDOMSVGElement(tagName, props) : new VirtualDOMHTMLElement(tagName, props);

      element = virtualDOMElement; ///
    } else if (firstArgument instanceof ReactClass) {
      var reactClass = firstArgument,
          ///
      reactClassElement = new ReactClassElement(reactClass, props);

      element = reactClassElement; ///

      var mixins = reactClass.mixins;


      assignMixins(mixins, element);
    } else if (isSubclassOf(firstArgument, ReactComponent)) {
      var _ReactComponent = firstArgument,
          ///
      reactComponent = new _ReactComponent(),
          reactComponentElement = new ReactComponentElement(reactComponent, props);

      element = reactComponentElement; ///

      assignReactComponentMixins(_ReactComponent, element);
    } else if (typeof firstArgument === 'function') {
      var reactFunction = firstArgument,
          ///
      reactFunctionElement = new ReactFunctionElement(reactFunction, props);

      element = reactFunctionElement; ///
    }
  }

  return element;
}

var Component = ReactComponent,
    ///
React = {
  Component: Component,
  createClass: createClass,
  createElement: createElement
};

module.exports = React;

function childrenFromChildArguments(childArguments) {
  childArguments = flatten(childArguments); ///

  var children = childArguments.map(function (childArgument) {
    var child = void 0;

    if (isSubclassOf(childArgument.constructor, Element)) {
      ///
      child = childArgument; ///
    } else {
      var text = childArgument,
          ///
      virtualDOMTextElement = new VirtualDOMTextElement(text);

      child = virtualDOMTextElement;
    }

    return child;
  });

  return children;
}

function assignReactComponentMixins(reactComponent, element) {
  var _reactComponent = reactComponent,
      mixins = _reactComponent.mixins;


  reactComponent = Object.getPrototypeOf(reactComponent); ///

  if (reactComponent !== ReactComponent) {
    assignReactComponentMixins(reactComponent, element);
  }

  assignMixins(mixins, element);
}

function assignMixins(mixins, element) {
  if (mixins) {
    mixins.forEach(function (mixin) {
      var name = mixin.name;


      element[name] = mixin.bind(element);
    });
  }
}

function isSubclassOf(argument, Class) {
  var subclass = false;

  if (argument.name === Class.name) {
    ///
    subclass = true;
  } else {
    argument = Object.getPrototypeOf(argument); ///

    if (argument !== null) {
      subclass = isSubclassOf(argument, Class);
    }
  }

  return subclass;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9yZWFjdC5qcyJdLCJuYW1lcyI6WyJFbGVtZW50IiwicmVxdWlyZSIsIlJlYWN0Q2xhc3MiLCJuYW1lVXRpbGl0aWVzIiwiYXJyYXlVdGlsaXRpZXMiLCJSZWFjdENvbXBvbmVudCIsIlJlYWN0Q2xhc3NFbGVtZW50IiwiUmVhY3RGdW5jdGlvbkVsZW1lbnQiLCJSZWFjdENvbXBvbmVudEVsZW1lbnQiLCJWaXJ0dWFsRE9NVGV4dEVsZW1lbnQiLCJWaXJ0dWFsRE9NSFRNTEVsZW1lbnQiLCJWaXJ0dWFsRE9NU1ZHRWxlbWVudCIsImZsYXR0ZW4iLCJpc1NWR1RhZ05hbWUiLCJjcmVhdGVDbGFzcyIsIm9iamVjdCIsImNyZWF0ZSIsImNyZWF0ZUVsZW1lbnQiLCJmaXJzdEFyZ3VtZW50IiwicHJvcGVydGllcyIsImVsZW1lbnQiLCJ1bmRlZmluZWQiLCJjaGlsZEFyZ3VtZW50cyIsImNoaWxkcmVuIiwiY2hpbGRyZW5Gcm9tQ2hpbGRBcmd1bWVudHMiLCJwcm9wcyIsIk9iamVjdCIsImFzc2lnbiIsInRhZ05hbWUiLCJ2aXJ0dWFsRE9NRWxlbWVudCIsInJlYWN0Q2xhc3MiLCJyZWFjdENsYXNzRWxlbWVudCIsIm1peGlucyIsImFzc2lnbk1peGlucyIsImlzU3ViY2xhc3NPZiIsInJlYWN0Q29tcG9uZW50IiwicmVhY3RDb21wb25lbnRFbGVtZW50IiwiYXNzaWduUmVhY3RDb21wb25lbnRNaXhpbnMiLCJyZWFjdEZ1bmN0aW9uIiwicmVhY3RGdW5jdGlvbkVsZW1lbnQiLCJDb21wb25lbnQiLCJSZWFjdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtYXAiLCJjaGlsZEFyZ3VtZW50IiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsInRleHQiLCJ2aXJ0dWFsRE9NVGV4dEVsZW1lbnQiLCJnZXRQcm90b3R5cGVPZiIsImZvckVhY2giLCJtaXhpbiIsIm5hbWUiLCJiaW5kIiwiYXJndW1lbnQiLCJDbGFzcyIsInN1YmNsYXNzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxVQUFVQyxRQUFRLFdBQVIsQ0FBaEI7QUFBQSxJQUNNQyxhQUFhRCxRQUFRLGNBQVIsQ0FEbkI7QUFBQSxJQUVHRSxnQkFBZ0JGLFFBQVEsa0JBQVIsQ0FGbkI7QUFBQSxJQUdNRyxpQkFBaUJILFFBQVEsbUJBQVIsQ0FIdkI7QUFBQSxJQUlHSSxpQkFBaUJKLFFBQVEsa0JBQVIsQ0FKcEI7QUFBQSxJQUtNSyxvQkFBb0JMLFFBQVEsdUJBQVIsQ0FMMUI7QUFBQSxJQU1NTSx1QkFBdUJOLFFBQVEsMEJBQVIsQ0FON0I7QUFBQSxJQU9NTyx3QkFBd0JQLFFBQVEsMkJBQVIsQ0FQOUI7QUFBQSxJQVFNUSx3QkFBd0JSLFFBQVEsc0NBQVIsQ0FSOUI7QUFBQSxJQVNNUyx3QkFBd0JULFFBQVEsdUNBQVIsQ0FUOUI7QUFBQSxJQVVHVSx1QkFBdUJWLFFBQVEsc0NBQVIsQ0FWMUI7O0FBWU0sSUFBRVcsT0FBRixHQUFjUixjQUFkLENBQUVRLE9BQUY7QUFBQSxJQUNEQyxZQURDLEdBQ2dCVixhQURoQixDQUNEVSxZQURDOzs7QUFHTixTQUFTQyxXQUFULENBQXFCQyxNQUFyQixFQUE2QjtBQUMzQixTQUFPYixXQUFXYyxNQUFYLENBQWtCRCxNQUFsQixDQUFQO0FBQ0Q7O0FBRUQsU0FBU0UsYUFBVCxDQUF1QkMsYUFBdkIsRUFBc0NDLFVBQXRDLEVBQXFFO0FBQ25FLE1BQUlDLFVBQVUsSUFBZDs7QUFFQSxNQUFJRixrQkFBa0JHLFNBQXRCLEVBQWlDO0FBQUEsc0NBSGtCQyxjQUdsQjtBQUhrQkEsb0JBR2xCO0FBQUE7O0FBQy9CLFFBQU1DLFdBQVdDLDJCQUEyQkYsY0FBM0IsQ0FBakI7QUFBQSxRQUNNRyxRQUFRQyxPQUFPQyxNQUFQLENBQWMsRUFBZCxFQUFrQlIsVUFBbEIsRUFBOEI7QUFDcENJO0FBRG9DLEtBQTlCLENBRGQ7O0FBS0EsUUFBSSxLQUFKLEVBQVc7QUFDVDtBQUNELEtBRkQsTUFFTyxJQUFJLE9BQU9MLGFBQVAsS0FBeUIsUUFBN0IsRUFBdUM7QUFDNUMsVUFBTVUsVUFBVVYsYUFBaEI7QUFBQSxVQUFnQztBQUMxQlcsMEJBQW9CaEIsYUFBYWUsT0FBYixJQUNmLElBQUlqQixvQkFBSixDQUF5QmlCLE9BQXpCLEVBQWtDSCxLQUFsQyxDQURlLEdBRWQsSUFBSWYscUJBQUosQ0FBMEJrQixPQUExQixFQUFtQ0gsS0FBbkMsQ0FIWjs7QUFLQUwsZ0JBQVVTLGlCQUFWLENBTjRDLENBTWhCO0FBQzdCLEtBUE0sTUFPQSxJQUFJWCx5QkFBeUJoQixVQUE3QixFQUF5QztBQUM5QyxVQUFNNEIsYUFBYVosYUFBbkI7QUFBQSxVQUFrQztBQUM1QmEsMEJBQW9CLElBQUl6QixpQkFBSixDQUFzQndCLFVBQXRCLEVBQWtDTCxLQUFsQyxDQUQxQjs7QUFHQUwsZ0JBQVVXLGlCQUFWLENBSjhDLENBSWhCOztBQUpnQixVQU10Q0MsTUFOc0MsR0FNM0JGLFVBTjJCLENBTXRDRSxNQU5zQzs7O0FBUTlDQyxtQkFBYUQsTUFBYixFQUFxQlosT0FBckI7QUFDRCxLQVRNLE1BU0EsSUFBSWMsYUFBYWhCLGFBQWIsRUFBNEJiLGNBQTVCLENBQUosRUFBaUQ7QUFDdEQsVUFBTUEsa0JBQWlCYSxhQUF2QjtBQUFBLFVBQXVDO0FBQ2pDaUIsdUJBQWlCLElBQUk5QixlQUFKLEVBRHZCO0FBQUEsVUFFTStCLHdCQUF3QixJQUFJNUIscUJBQUosQ0FBMEIyQixjQUExQixFQUEwQ1YsS0FBMUMsQ0FGOUI7O0FBSUFMLGdCQUFVZ0IscUJBQVYsQ0FMc0QsQ0FLcEI7O0FBRWxDQyxpQ0FBMkJoQyxlQUEzQixFQUEyQ2UsT0FBM0M7QUFDRCxLQVJNLE1BUUEsSUFBSSxPQUFPRixhQUFQLEtBQXlCLFVBQTdCLEVBQXlDO0FBQzlDLFVBQU1vQixnQkFBZ0JwQixhQUF0QjtBQUFBLFVBQXNDO0FBQ2hDcUIsNkJBQXVCLElBQUloQyxvQkFBSixDQUF5QitCLGFBQXpCLEVBQXdDYixLQUF4QyxDQUQ3Qjs7QUFHQUwsZ0JBQVVtQixvQkFBVixDQUo4QyxDQUlkO0FBQ2pDO0FBQ0Y7O0FBRUQsU0FBT25CLE9BQVA7QUFDRDs7QUFFRCxJQUFNb0IsWUFBWW5DLGNBQWxCO0FBQUEsSUFBa0M7QUFDNUJvQyxRQUFRO0FBQ05ELHNCQURNO0FBRU4xQiwwQkFGTTtBQUdORztBQUhNLENBRGQ7O0FBT0F5QixPQUFPQyxPQUFQLEdBQWlCRixLQUFqQjs7QUFFQSxTQUFTakIsMEJBQVQsQ0FBb0NGLGNBQXBDLEVBQW9EO0FBQ2xEQSxtQkFBaUJWLFFBQVFVLGNBQVIsQ0FBakIsQ0FEa0QsQ0FDUjs7QUFFMUMsTUFBTUMsV0FBV0QsZUFBZXNCLEdBQWYsQ0FBbUIsVUFBU0MsYUFBVCxFQUF3QjtBQUMxRCxRQUFJQyxjQUFKOztBQUVBLFFBQUlaLGFBQWFXLGNBQWNFLFdBQTNCLEVBQXdDL0MsT0FBeEMsQ0FBSixFQUFzRDtBQUFFO0FBQ3REOEMsY0FBUUQsYUFBUixDQURvRCxDQUM1QjtBQUN6QixLQUZELE1BRU87QUFDTCxVQUFNRyxPQUFPSCxhQUFiO0FBQUEsVUFBNEI7QUFDdEJJLDhCQUF3QixJQUFJeEMscUJBQUosQ0FBMEJ1QyxJQUExQixDQUQ5Qjs7QUFHQUYsY0FBUUcscUJBQVI7QUFDRDs7QUFFRCxXQUFPSCxLQUFQO0FBQ0QsR0FiZ0IsQ0FBakI7O0FBZUEsU0FBT3ZCLFFBQVA7QUFDRDs7QUFFRCxTQUFTYywwQkFBVCxDQUFvQ0YsY0FBcEMsRUFBb0RmLE9BQXBELEVBQTZEO0FBQUEsd0JBQ3hDZSxjQUR3QztBQUFBLE1BQ25ESCxNQURtRCxtQkFDbkRBLE1BRG1EOzs7QUFHM0RHLG1CQUFpQlQsT0FBT3dCLGNBQVAsQ0FBc0JmLGNBQXRCLENBQWpCLENBSDJELENBR0g7O0FBRXhELE1BQUlBLG1CQUFtQjlCLGNBQXZCLEVBQXVDO0FBQ3JDZ0MsK0JBQTJCRixjQUEzQixFQUEyQ2YsT0FBM0M7QUFDRDs7QUFFRGEsZUFBYUQsTUFBYixFQUFxQlosT0FBckI7QUFDRDs7QUFFRCxTQUFTYSxZQUFULENBQXNCRCxNQUF0QixFQUE4QlosT0FBOUIsRUFBdUM7QUFDckMsTUFBSVksTUFBSixFQUFZO0FBQ1ZBLFdBQU9tQixPQUFQLENBQWUsVUFBU0MsS0FBVCxFQUFnQjtBQUFBLFVBQ3JCQyxJQURxQixHQUNaRCxLQURZLENBQ3JCQyxJQURxQjs7O0FBRzdCakMsY0FBUWlDLElBQVIsSUFBZ0JELE1BQU1FLElBQU4sQ0FBV2xDLE9BQVgsQ0FBaEI7QUFDRCxLQUpEO0FBS0Q7QUFDRjs7QUFFRCxTQUFTYyxZQUFULENBQXNCcUIsUUFBdEIsRUFBZ0NDLEtBQWhDLEVBQXVDO0FBQ3JDLE1BQUlDLFdBQVcsS0FBZjs7QUFFQSxNQUFJRixTQUFTRixJQUFULEtBQWtCRyxNQUFNSCxJQUE1QixFQUFrQztBQUFFO0FBQ2xDSSxlQUFXLElBQVg7QUFDRCxHQUZELE1BRU87QUFDTEYsZUFBVzdCLE9BQU93QixjQUFQLENBQXNCSyxRQUF0QixDQUFYLENBREssQ0FDdUM7O0FBRTVDLFFBQUlBLGFBQWEsSUFBakIsRUFBdUI7QUFDckJFLGlCQUFXdkIsYUFBYXFCLFFBQWIsRUFBdUJDLEtBQXZCLENBQVg7QUFDRDtBQUNGOztBQUVELFNBQU9DLFFBQVA7QUFDRCIsImZpbGUiOiJyZWFjdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudCcpLFxuICAgICAgUmVhY3RDbGFzcyA9IHJlcXVpcmUoJy4vcmVhY3RDbGFzcycpLFxuXHRcdFx0bmFtZVV0aWxpdGllcyA9IHJlcXVpcmUoJy4vdXRpbGl0aWVzL25hbWUnKSxcbiAgICAgIGFycmF5VXRpbGl0aWVzID0gcmVxdWlyZSgnLi91dGlsaXRpZXMvYXJyYXknKSxcblx0XHRcdFJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9yZWFjdENvbXBvbmVudCcpLFxuICAgICAgUmVhY3RDbGFzc0VsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnQvcmVhY3QvY2xhc3MnKSxcbiAgICAgIFJlYWN0RnVuY3Rpb25FbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3JlYWN0L2Z1bmN0aW9uJyksXG4gICAgICBSZWFjdENvbXBvbmVudEVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnQvcmVhY3QvY29tcG9uZW50JyksXG4gICAgICBWaXJ0dWFsRE9NVGV4dEVsZW1lbnQgPSByZXF1aXJlKCcuL2VsZW1lbnQvdmlydHVhbERPTU5vZGUvdGV4dEVsZW1lbnQnKSxcbiAgICAgIFZpcnR1YWxET01IVE1MRWxlbWVudCA9IHJlcXVpcmUoJy4vZWxlbWVudC92aXJ0dWFsRE9NTm9kZS9lbGVtZW50L2h0bWwnKSxcblx0XHRcdFZpcnR1YWxET01TVkdFbGVtZW50ID0gcmVxdWlyZSgnLi9lbGVtZW50L3ZpcnR1YWxET01Ob2RlL2VsZW1lbnQvc3ZnJyk7XG5cbmNvbnN0IHsgZmxhdHRlbiB9ID0gYXJyYXlVdGlsaXRpZXMsXG5cdFx0XHR7IGlzU1ZHVGFnTmFtZSB9ID0gbmFtZVV0aWxpdGllcztcblxuZnVuY3Rpb24gY3JlYXRlQ2xhc3Mob2JqZWN0KSB7XG4gIHJldHVybiBSZWFjdENsYXNzLmNyZWF0ZShvYmplY3QpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50KGZpcnN0QXJndW1lbnQsIHByb3BlcnRpZXMsIC4uLmNoaWxkQXJndW1lbnRzKSB7XG4gIGxldCBlbGVtZW50ID0gbnVsbDtcblxuICBpZiAoZmlyc3RBcmd1bWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZHJlbkZyb21DaGlsZEFyZ3VtZW50cyhjaGlsZEFyZ3VtZW50cyksXG4gICAgICAgICAgcHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCBwcm9wZXJ0aWVzLCB7XG4gICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgIH0pO1xuXG4gICAgaWYgKGZhbHNlKSB7XG4gICAgICAvLy9cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZ3VtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgdGFnTmFtZSA9IGZpcnN0QXJndW1lbnQsICAvLy9cbiAgICAgICAgICAgIHZpcnR1YWxET01FbGVtZW50ID0gaXNTVkdUYWdOYW1lKHRhZ05hbWUpID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuZXcgVmlydHVhbERPTVNWR0VsZW1lbnQodGFnTmFtZSwgcHJvcHMpIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5ldyBWaXJ0dWFsRE9NSFRNTEVsZW1lbnQodGFnTmFtZSwgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gdmlydHVhbERPTUVsZW1lbnQgLy8vXG4gICAgfSBlbHNlIGlmIChmaXJzdEFyZ3VtZW50IGluc3RhbmNlb2YgUmVhY3RDbGFzcykge1xuICAgICAgY29uc3QgcmVhY3RDbGFzcyA9IGZpcnN0QXJndW1lbnQsIC8vL1xuICAgICAgICAgICAgcmVhY3RDbGFzc0VsZW1lbnQgPSBuZXcgUmVhY3RDbGFzc0VsZW1lbnQocmVhY3RDbGFzcywgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gcmVhY3RDbGFzc0VsZW1lbnQ7ICAvLy9cblxuICAgICAgY29uc3QgeyBtaXhpbnMgfSA9IHJlYWN0Q2xhc3M7XG5cbiAgICAgIGFzc2lnbk1peGlucyhtaXhpbnMsIGVsZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNTdWJjbGFzc09mKGZpcnN0QXJndW1lbnQsIFJlYWN0Q29tcG9uZW50KSkge1xuICAgICAgY29uc3QgUmVhY3RDb21wb25lbnQgPSBmaXJzdEFyZ3VtZW50LCAgLy8vXG4gICAgICAgICAgICByZWFjdENvbXBvbmVudCA9IG5ldyBSZWFjdENvbXBvbmVudCgpLFxuICAgICAgICAgICAgcmVhY3RDb21wb25lbnRFbGVtZW50ID0gbmV3IFJlYWN0Q29tcG9uZW50RWxlbWVudChyZWFjdENvbXBvbmVudCwgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gcmVhY3RDb21wb25lbnRFbGVtZW50OyAgLy8vXG5cbiAgICAgIGFzc2lnblJlYWN0Q29tcG9uZW50TWl4aW5zKFJlYWN0Q29tcG9uZW50LCBlbGVtZW50KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZ3VtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zdCByZWFjdEZ1bmN0aW9uID0gZmlyc3RBcmd1bWVudCwgIC8vL1xuICAgICAgICAgICAgcmVhY3RGdW5jdGlvbkVsZW1lbnQgPSBuZXcgUmVhY3RGdW5jdGlvbkVsZW1lbnQocmVhY3RGdW5jdGlvbiwgcHJvcHMpO1xuXG4gICAgICBlbGVtZW50ID0gcmVhY3RGdW5jdGlvbkVsZW1lbnQ7IC8vL1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5jb25zdCBDb21wb25lbnQgPSBSZWFjdENvbXBvbmVudCwgLy8vXG4gICAgICBSZWFjdCA9IHtcbiAgICAgICAgQ29tcG9uZW50LFxuICAgICAgICBjcmVhdGVDbGFzcyxcbiAgICAgICAgY3JlYXRlRWxlbWVudFxuICAgICAgfTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdDtcblxuZnVuY3Rpb24gY2hpbGRyZW5Gcm9tQ2hpbGRBcmd1bWVudHMoY2hpbGRBcmd1bWVudHMpIHtcbiAgY2hpbGRBcmd1bWVudHMgPSBmbGF0dGVuKGNoaWxkQXJndW1lbnRzKTsgLy8vXG5cbiAgY29uc3QgY2hpbGRyZW4gPSBjaGlsZEFyZ3VtZW50cy5tYXAoZnVuY3Rpb24oY2hpbGRBcmd1bWVudCkge1xuICAgIGxldCBjaGlsZDtcblxuICAgIGlmIChpc1N1YmNsYXNzT2YoY2hpbGRBcmd1bWVudC5jb25zdHJ1Y3RvciwgRWxlbWVudCkpIHsgLy8vXG4gICAgICBjaGlsZCA9IGNoaWxkQXJndW1lbnQ7ICAvLy9cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGV4dCA9IGNoaWxkQXJndW1lbnQsIC8vL1xuICAgICAgICAgICAgdmlydHVhbERPTVRleHRFbGVtZW50ID0gbmV3IFZpcnR1YWxET01UZXh0RWxlbWVudCh0ZXh0KTtcblxuICAgICAgY2hpbGQgPSB2aXJ0dWFsRE9NVGV4dEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9KTtcblxuICByZXR1cm4gY2hpbGRyZW47XG59XG5cbmZ1bmN0aW9uIGFzc2lnblJlYWN0Q29tcG9uZW50TWl4aW5zKHJlYWN0Q29tcG9uZW50LCBlbGVtZW50KSB7XG4gIGNvbnN0IHsgbWl4aW5zIH0gPSByZWFjdENvbXBvbmVudDtcblxuICByZWFjdENvbXBvbmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihyZWFjdENvbXBvbmVudCk7IC8vL1xuXG4gIGlmIChyZWFjdENvbXBvbmVudCAhPT0gUmVhY3RDb21wb25lbnQpIHtcbiAgICBhc3NpZ25SZWFjdENvbXBvbmVudE1peGlucyhyZWFjdENvbXBvbmVudCwgZWxlbWVudCk7XG4gIH1cblxuICBhc3NpZ25NaXhpbnMobWl4aW5zLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gYXNzaWduTWl4aW5zKG1peGlucywgZWxlbWVudCkge1xuICBpZiAobWl4aW5zKSB7XG4gICAgbWl4aW5zLmZvckVhY2goZnVuY3Rpb24obWl4aW4pIHtcbiAgICAgIGNvbnN0IHsgbmFtZSB9ID0gbWl4aW47XG5cbiAgICAgIGVsZW1lbnRbbmFtZV0gPSBtaXhpbi5iaW5kKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzU3ViY2xhc3NPZihhcmd1bWVudCwgQ2xhc3MpIHtcbiAgbGV0IHN1YmNsYXNzID0gZmFsc2U7XG5cbiAgaWYgKGFyZ3VtZW50Lm5hbWUgPT09IENsYXNzLm5hbWUpIHsgLy8vXG4gICAgc3ViY2xhc3MgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGFyZ3VtZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGFyZ3VtZW50KTsgLy8vXG5cbiAgICBpZiAoYXJndW1lbnQgIT09IG51bGwpIHtcbiAgICAgIHN1YmNsYXNzID0gaXNTdWJjbGFzc09mKGFyZ3VtZW50LCBDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN1YmNsYXNzO1xufVxuIl19